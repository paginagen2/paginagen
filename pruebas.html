<script>
// ğŸ”¥ CONFIGURACIÃ“N FIREBASE - Coloca esto en tu HTML
console.log('ğŸš€ Iniciando configuraciÃ³n Firebase...');

// 1ï¸âƒ£ DEFINIR CONFIGURACIÃ“N (reemplaza con tus datos reales)
const firebaseConfig = {
  apiKey: "AIzaSyB7US5r--cM82usyzLqd-ckamgIdyewfKE",
  authDomain: "pagina-gen.firebaseapp.com",
  projectId: "pagina-gen",
  storageBucket: "pagina-gen.firebasestorage.app",
  messagingSenderId: "876893109130",
  appId: "1:876893109130:web:862f79fc7a609e512ee673",
};

console.log('ğŸ“ ConfiguraciÃ³n cargada:', firebaseConfig);

// 2ï¸âƒ£ INICIALIZAR FIREBASE DE FORMA CORRECTA
(async function initializeFirebaseApp() {
    try {
        console.log('ğŸ“¦ Importando mÃ³dulos Firebase...');
        
        // Importar Firebase App
        const { initializeApp } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js');
        console.log('âœ… Firebase App importado');
        
        // Importar Firestore
        const { getFirestore } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js');
        console.log('âœ… Firestore importado');
        
        // Inicializar aplicaciÃ³n
        console.log('ğŸ”§ Inicializando Firebase App...');
        const app = initializeApp(firebaseConfig);
        console.log('âœ… Firebase App inicializado:', app.name);
        
        // Inicializar Firestore
        console.log('ğŸ’¾ Inicializando Firestore...');
        const db = getFirestore(app);
        console.log('âœ… Firestore inicializado');
        
        // Exponerlos globalmente para usar en tu app
        window.firebaseApp = app;
        window.firebaseDb = db;
        
        console.log('ğŸ‰ Â¡Firebase configurado correctamente!');
        console.log('ğŸ”— Accede con: window.firebaseApp y window.firebaseDb');
        
        // Mostrar confirmaciÃ³n visual
        if (document.body) {
            const successMsg = document.createElement('div');
            successMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 9999;
                font-weight: 600;
            `;
            successMsg.innerHTML = 'ğŸ”¥ Firebase conectado exitosamente!';
            document.body.appendChild(successMsg);
            
            setTimeout(() => successMsg.remove(), 5000);
        }
        
    } catch (error) {
        console.error('âŒ Error inicializando Firebase:', error);
        
        // Mostrar error visual
        if (document.body) {
            const errorMsg = document.createElement('div');
            errorMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #ef4444;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 9999;
                font-weight: 600;
                max-width: 400px;
            `;
            errorMsg.innerHTML = `âŒ Error Firebase: ${error.message}`;
            document.body.appendChild(errorMsg);
            
            setTimeout(() => errorMsg.remove(), 10000);
        }
    }
})();

// 3ï¸âƒ£ FUNCIONES AUXILIARES PARA TU APP MUSICAL
// Ejemplo: Guardar un acorde
window.guardarAcorde = async function(nombre, digitacion) {
    try {
        const { collection, addDoc } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js');
        
        const docRef = await addDoc(collection(window.firebaseDb, 'acordes'), {
            nombre: nombre,
            digitacion: digitacion,
            fechaCreacion: new Date(),
            usuario: 'anonimo' // o el usuario actual
        });
        
        console.log('ğŸ¸ Acorde guardado:', docRef.id);
        return docRef.id;
    } catch (error) {
        console.error('âŒ Error guardando acorde:', error);
        throw error;
    }
};

// Ejemplo: Obtener acordes
window.obtenerAcordes = async function() {
    try {
        const { collection, getDocs } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js');
        
        const querySnapshot = await getDocs(collection(window.firebaseDb, 'acordes'));
        const acordes = [];
        
        querySnapshot.forEach((doc) => {
            acordes.push({
                id: doc.id,
                ...doc.data()
            });
        });
        
        console.log('ğŸµ Acordes obtenidos:', acordes.length);
        return acordes;
    } catch (error) {
        console.error('âŒ Error obteniendo acordes:', error);
        return [];
    }
};

console.log('ğŸ¸ Funciones de Firebase listas para usar: guardarAcorde() y obtenerAcordes()');
</script>